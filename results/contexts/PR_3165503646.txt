
Context for PR #3165503646
Primary language: TypeScript

PR title:
fix: Replace REST API with WebSocket for agent spawning

PR body:
## Summary
Fixes the broken agent spawning functionality by replacing the REST API call with proper WebSocket/Nostr event creation.

## Bug Fix (Fixes #1032)
The agent spawning was broken because it was still trying to use the `/api/agents` REST endpoint which was removed as part of the WebSocket transition in #1009.

### Changes Made

1. **Removed REST API call**
   - Deleted the broken `fetch('/api/agents')` call
   - This endpoint no longer exists after #1009

2. **Implemented WebSocket-based
...
## Test Plan
- [x] Build passes
- [x] All tests pass
- [x] TypeScript compilation successful
- [ ] Manual testing: Create agent via UI
- [ ] Manual testing: Agent appears in list after creation
- [ ] Manual testing: Agent profile event visible in relay

## Related Issues
- Fixes #1032 - Agent spawning still uses REST endpoint instead of WebSocket
- Part of #1009 - Complete WebSocket Transition

ðŸ¤– Generated with [Claude Code](https://claude.ai/code)

Co-Authored-By: Claude <noreply@anthropic.com>

Diff summary:
apps/openagents.com/src/routes/agents.ts
@@ -63,9 +63,130 @@ export async function agents() {
         </main>
       </div>
 
-      <script>
+      <script type="module">
+        // Import Effect.js and Nostr services from CDN
+        im
...
     window.addEventListener('DOMContentLoaded', () => {
+          loadAgents();
+          initializeWebSocket();
+          initializeEffectRuntime();
+        });
       </script>
 
       <style>

First failing CI snippet:


Top review comments:


Commit messages (for context):
fix: Replace REST API with WebSocket for agent spawning (fixes #1032)

- Removed broken /api/agents REST endpoint call
- Implemented proper Nostr event creation for agent profiles
- Uses kind 31337 (NIP-OA agent profile events)
- Generates proper Schnorr keypairs using noble-curves
- Signs events correctly with Nostr protocol
- Maintains backward compatibility with localStorage
- Shows pending status until relay confirms event
- Properly subscribes to agent profile events on WebSocket

This completes part of the WebSocket transition from #1009.

ðŸ¤– Generated with Claude Code

Co-Authored-By: Claude <noreply@anthropic.com>
