
Context for PR #3265782173
Primary language: Rust

PR title:
chore: remove HashedPostStateProvider trait

PR body:
## Summary

#17545 

Remove the unused `HashedPostStateProvider` trait from the codebase.

## Changes
- Removed `HashedPostStateProvider` trait definition
- This trait was not being used anywhere in the codebase

ðŸ¤– Generated with [Claude Code](https://claude.ai/code)

Co-Authored-By: Claude <noreply@anthropic.com>

Diff summary:
crates/chain-state/src/in_memory.rs
@@ -996,8 +996,8 @@ mod tests {
     use reth_ethereum_primitives::{EthPrimitives, Receipt};
     use reth_primitives_traits::{Account, Bytecode};
     use reth_storage_api::{
-        AccountReader, 
...
abase::BundleState) -> HashedPostState {
-            HashedPostState::default()
-        }
-    }
-
     impl StorageRootProvider for MockStateProvider {
         fn storage_root(
             &self,
crates/chain-state/src/memory_overlay.rs
@@ -4,14 +4,13 @@ use alloy_primitives::{keccak256, Address, BlockNumber, Bytes, StorageKey, Stora
 use reth_errors::ProviderResult;
 use reth_primitives_traits::{Account, Bytecode, NodePrimitives};
 
...
ashedPostState {
-        self.historical.hashed_post_state(bundle_state)
-    }
-}
-
 impl<N: NodePrimitives> StateProvider for MemoryOverlayStateProviderRef<'_, N> {
     fn storage(
         &self,
crates/engine/invalid-block-hooks/src/witness.rs
@@ -10,7 +10,7 @@ use reth_provider::{BlockExecutionOutput, ChainSpecProvider, StateProviderFactor
 use reth_revm::{database::StateProviderDatabase, db::BundleState, state::AccountInfo};
 use reth_rpc
...
tate::from_bundle_state::<KeccakKeyHasher>(bundle_state.state());
         for (address, account) in db.cache.accounts {
             let hashed_address = keccak256(address);
             hashed_state
crates/engine/tree/src/tree/cached_state.rs
@@ -6,8 +6,8 @@ use reth_errors::ProviderResult;
 use reth_metrics::Metrics;
 use reth_primitives_traits::{Account, Bytecode};
 use reth_provider::{
-    AccountReader, BlockHashReader, BytecodeReader
...
       self.state_provider.hashed_post_state(bundle_state)
-    }
-}
-
 /// The set of caches that are used in the [`CachedStateProvider`].
 #[derive(Debug, Clone)]
 pub(crate) struct ProviderCaches {
crates/engine/tree/src/tree/instrumented_state.rs
@@ -5,8 +5,8 @@ use reth_errors::ProviderResult;
 use reth_metrics::Metrics;
 use reth_primitives_traits::{Account, Bytecode};
 use reth_provider::{
-    AccountReader, BlockHashReader, BytecodeReader
...
r InstrumentedStateProvider<S> {
-    fn hashed_post_state(&self, bundle_state: &reth_revm::db::BundleState) -> HashedPostState {
-        self.state_provider.hashed_post_state(bundle_state)
-    }
-}
crates/engine/tree/src/tree/mod.rs
@@ -38,13 +38,12 @@ use reth_primitives_traits::{
 };
 use reth_provider::{
     providers::ConsistentDbView, BlockNumReader, BlockReader, DBProvider, DatabaseProviderFactory,
-    ExecutionOutcome, H
...
(&output.state);
+        let hashed_state =
+            HashedPostState::from_bundle_state::<KeccakKeyHasher>(output.state.state());
 
         if let Err(err) = self
             .payload_validator
crates/engine/tree/src/tree/payload_validator.rs
@@ -26,11 +26,11 @@ use reth_primitives_traits::{
 };
 use reth_provider::{
     BlockExecutionOutput, BlockNumReader, BlockReader, DBProvider, DatabaseProviderFactory,
-    HashedPostStateProvider, H
...
_state =
+            HashedPostState::from_bundle_state::<KeccakKeyHasher>(output.state.state());
 
         debug!(target: "engine::tree", block=?block.num_hash(), "Calculating block state root");
 
crates/evm/evm/src/execute.rs
@@ -21,7 +21,7 @@ use reth_primitives_traits::{
 };
 use reth_storage_api::StateProvider;
 pub use reth_storage_errors::provider::ProviderError;
-use reth_trie_common::{updates::TrieUpdates, HashedPos
...
ccakKeyHasher>(db.bundle_state.state());
         let (state_root, trie_updates) = state
             .state_root_with_updates(hashed_state.clone())
             .map_err(BlockExecutionError::other)?;
crates/revm/src/test_utils.rs
@@ -4,8 +4,8 @@ use alloy_primitives::{
 };
 use reth_primitives_traits::{Account, Bytecode};
 use reth_storage_api::{
-    AccountReader, BlockHashReader, BytecodeReader, HashedPostStateProvider, Sta
...
tate) -> HashedPostState {
-        HashedPostState::from_bundle_state::<KeccakKeyHasher>(bundle_state.state())
-    }
-}
-
 impl StateProvider for StateProviderTest {
     fn storage

First failing CI snippet:


Top review comments:


Commit messages (for context):
remove HashedPostStateProvider trait
