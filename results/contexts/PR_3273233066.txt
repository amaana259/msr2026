
Context for PR #3273233066
Primary language: Go

PR title:
feat: implement comprehensive species tracking system with seasonal/yearly detection badges

PR body:
## Summary
This PR implements a comprehensive species tracking system that displays visual badges on the DailySummaryCard to indicate when species are new, new this year, or new this season. The implementation includes proper database queries, caching, and UI enhancements.

## Key Features

### üè∑Ô∏è Species Tracking Badges
- **‚≠ê Star Icon**: Species detected for the first time ever (lifetime new)
- **üìÖ Calendar Icon**: Species detected for the first time this year 
- **üçÉ Leaf Icon**: Species detec
...
ns: window durations, yearly resets, seasonal definitions.

* **Bug Fixes**
  * Improved modal overlay behavior to prevent accidental closure.

* **Documentation**
  * Updated comments and accessibility notes.

* **Tests**
  * Added extensive unit and integration tests for species tracking, seasonal/yearly transitions, notifications, and database analytics.

* **Chores**
  * Added new icons and CSS animations for UI feedback.
<!-- end of auto-generated comment: release notes by coderabbit.ai -->

Diff summary:
internal/analysis/processor/new_species_tracker.go

internal/analysis/processor/processor.go

internal/api/v2/detections.go

internal/api/v2/sse.go

internal/conf/config.go

internal/analysis/processor/new_species_tracker_test.go

internal/conf/defaults.go

internal/conf/validate.go

frontend/src/lib/desktop/features/dashboard/components/DailySummaryCard.svelte

frontend/src/lib/types/detection.types.ts

internal/analysis/processor/actions.go

internal/analysis/processor/detection_event_test.go

internal/analysis/processor/processor.go

internal/api/v2/analytics.go

internal/events/detection_event.go

internal/events/eventbus.go

internal/notification/detection_consumer.go

internal/notification/detection_consumer_test.go

internal/notification/eventbus_integration.go

frontend/src/lib/desktop/features/dashboard/components/DailySummaryCard.svelte

frontend/src/lib/types/detection.types.ts

internal/analysis/processor/detection_event_test.go

internal/analysis/processor/new_species_tracker.go

internal/analysis/processor/new_species_tracker_test.go

internal/api/v2/analytics.go

internal/api/v2/detections.go

internal/conf/config.go

internal/conf/defaults.go

internal/conf/validate.go

internal/notification/detection_consumer_test.go

frontend/src/lib/desktop/features/dashboard/components/DailySummaryCard.svelte

frontend/src/lib/desktop/features/settings/pages/MainSettingsPage.svelte

internal/analysis/processor/actions.go

internal/analysis/processor/new_species_tracker.go

internal/api/v2/analytics.go

internal/datastore/manage.go

internal/datastore/model.go

frontend/src/lib/desktop/features/dashboard/components/DailySummaryCard.svelte

frontend/src/lib/desktop/features/dashboard/pages/DashboardPage.svelte

frontend/src/lib/desktop/features/settings/pages/MainSettingsPage.svelte

frontend/src/lib/types/detection.types.ts

internal/analysis/processor/detection_event_test.go

internal/analysis/processor/new_species_tracker.go

internal/api/v2/analytics.go

frontend/src/lib/desktop/features/dashboard/components/DailySummaryCard.svelte

frontend/src/lib/desktop/features/dashboard/pages/DashboardPage.svelte

frontend/src/lib/desktop/features/dashboard/components/DailySummaryCard.svelte

frontend/src/lib/desktop/features/dashboard/components/DailySummaryCard.svelte

frontend/src/lib/utils/icons.ts

internal/analysis/processor/detection_event_test.go

internal/analysis/processor/new_species_tracker.go

internal/analysis/processor/new_species_tracker_test.go

internal/analysis/processor/processor.go

internal/analysis/processor/new_species_tracker.go

internal/analysis/processor/processor.go

internal/conf/validate.go

frontend/src/lib/utils/icons.ts

frontend/src/styles/custom.css

internal/analysis/processor/actions.go

internal/analysis/processor/detection_event_test.go

internal/analysis/processor/new_species_tracker_test.go

internal/analysis/processor/test_helpers.go

internal/datastore/manage.go

internal/analysis/processor/integration_test.go

internal/analysis/processor/new_species_tracker_periods_test.go

internal/datastore/analytics_test.go

internal/analysis/processor/new_species_tracker.go

internal/analysis/processor/new_species_tracker_periods_test.go

internal/analysis/processor/new_species_tracker.go

internal/analysis/processor/integration_test.go

internal/analysis/processor/new_species_tracker.go

internal/analysis/processor/new_species_tracker_periods_test.go

internal/analysis/processor/test_helpers.go

internal/api/v2/analytics.go

internal/api/v2/test_utils.go

internal/conf/defaults.go

internal/datastore/analytics.go

internal/datastore/interfaces.go

internal/analysis/processor/detection_event_test.go

internal/analysis/processor/new_species_tracker.go

internal/analysis/processor/new_species_tracker_periods_test.go

internal/analysis/processor/new_species_tracker_test.go

internal/analysis/processor/new_species_tracker_test.go

internal/analysis/processor/new_species_tracker.go

internal/analysis/proce

First failing CI snippet:


Top review comments:
**Actionable comments posted: 38**

<details>
<summary>üî≠ Outside diff range comments (1)</summary><blockquote>

<details>
<summary>frontend/src/lib/desktop/features/dashboard/pages/DashboardPage.svelte (1)</summary><blockquote>

`53-132`: **Well-implemented caching mechanism!**

The cache design is solid with proper TTL handling and memory leak prevention through cleanup.


Consider optimizing the cleanup to run periodically rather than after every cache write:

```diff
+  let cleanupTimer: ReturnType<typeof setInterval> | null = null;
+
+  // Start periodic cleanup when component mounts
+  onMount(() => {
+    // ... existing code ...
+    
+    // Run cleanup every 30 seconds
+    cleanupTimer = setInterval(() => {
+      cleanupDailySummaryCache();
+    }, 30000);
+    
+    return () => {
+      // ... existing cleanup ...
+      if (cleanupTimer) {
+        clearInterval(cleanupTimer);
+      }
+    };
+  });

   // In fetchDailySummary, remove the immediate cleanup call
   dailyS
...
ion](https://docs.coderabbit.ai) for detailed information on how to use CodeRabbit.
- Join our [Discord Community](http://discord.gg/coderabbit) to get help, request features, and share feedback.
- Follow us on [X/Twitter](https://twitter.com/coderabbitai) for updates and announcements.

</details>

<!-- tips_end -->
---
## [![Quality Gate Failed](https://sonarsource.github.io/sonarcloud-github-static-resources/v2/checks/QualityGateBadge/qg-failed-20px.png 'Quality Gate Failed')](https://sonarcloud.io/dashboard?id=tphakala_birdnet-go&pullRequest=1037) **Quality Gate failed**  
Failed conditions  
![](https://sonarsource.github.io/sonarcloud-github-static-resources/v2/common/failed-16px.png '') [14.5% Duplication on New Code](https://sonarcloud.io/component_measures?id=tphakala_birdnet-go&pullRequest=1037&metric=new_duplicated_lines_density&view=list) (required ‚â§ 3%)  
  
[See analysis details on SonarQube Cloud](https://sonarcloud.io/dashboard?id=tphakala_birdnet-go&pullRequest=1037)



Commit messages (for context):
feat: add new species tracking for dashboard highlighting

- Add NewSpeciesTracker with efficient in-memory tracking
- Track species first seen within configurable time window (default 14 days)
- Pass metadata through SSE and API endpoints to frontend
- Add configuration settings for species tracking
- No database schema changes - metadata only in API responses
- Minimal memory allocations with pre-allocated buffers

ü§ñ Generated with [Claude Code](https://claude.ai/code)

Co-Authored-By: Claude 
...
nfigurations.

ü§ñ Generated with [Claude Code](https://claude.ai/code)

Co-Authored-By: Claude <noreply@anthropic.com>
refactor: eliminate code duplication in season tests with helper function

- Extract repeated validation logic into validateSeasonConfiguration helper
- Maintains all comprehensive testing assertions
- Improves maintainability by centralizing validation logic
- Uses t.Helper() for proper test failure reporting
- Addresses linter duplication warnings while preserving test coverage
